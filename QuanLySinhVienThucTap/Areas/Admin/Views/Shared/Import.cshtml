@{ 
    string ControllerName = ViewBag.ControllerName;
}

<div class="modal fade" id="modalimport" tabindex="-1" role="dialog" aria-labelledby="modal-default" aria-hidden="true">
    <div class="modal-dialog modal- modal-dialog-centered modal-" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="modal-title-default" style="margin-left:20px; font-size: 18px;">Import Excel Danh Sách Sinh Viên Theo Mẫu Sau</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <a class="text-primary" style="margin-left: 20px; font-size:16px" href="@Url.Action("Download", ControllerName)">Dowload file mẫu tại đây</a>
            <div class="modal-body" style="background: #fff3bf; margin: 10px">
                <em>
                    <h5><i class="fas fa-exclamation-triangle"></i> Một số lưu ý khi nhập dữ liệu</h5>
                    <ul>
                        <li style="color: red">Nhập đầy đủ thông tin sinh viên trước khi thực hiện import Excel</li>
                        <li>Dữ liệu không chứa kí tự đặc biệt</li>
                        <li>Hạn chế dữ liệu trống</li>
                        <li>Mã sinh viên không được phép trùng</li>
                        <li>Thực hiện điền thông tin theo mẫu bên trên</li>
                    </ul>
                </em>
                @using (Html.BeginForm("Import", ControllerName, FormMethod.Post, new { id = "uploadForm", enctype = "multipart/form-data" }))
                {
                    <div class="container">
                        <div class="row">
                            <div class="col-9">
                                <div style="background: #fff; padding: 3px; margin-left: -10px">
                                    <input type="file" id="fileInput" name="UploadedFile">
                                </div>
                            </div>
                            <div class="col-3">
                                <button class="btn btn-icon btn-3 btn-primary" type="submit" id="submitBtn"><span class="btn-inner--icon">Submit</span></button>
                            </div>
                        </div>
                        <div id="fileError" class="text-danger" style="display:none;">Hãy chọn file trước khi nhập!!!</div>
                    </div>
                }
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link  ml-auto" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('uploadForm').onsubmit = function() {
        var fileInput = document.getElementById('fileInput');
        if (!fileInput.value) {
            document.getElementById('fileError').style.display = 'block';
            return false; // Ngăn chặn gửi form nếu không có file được chọn
        }
        return true; // Cho phép gửi form nếu có file được chọn
    };
</script>
